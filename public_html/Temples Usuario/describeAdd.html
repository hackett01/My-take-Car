<!DOCTYPE html>
<!--
<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!--> 
<html lang=""> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="apple-touch-icon" href="apple-touch-icon.png">
        <link rel="stylesheet" href="../css/bootstrap.min.css">
        <link rel="stylesheet" href="../font-awesome-4.5.0/css/font-awesome.min.css">
        <link href='https://fonts.googleapis.com/css?family=Didact+Gothic' rel='stylesheet' type='text/css'>  
        <script type="text/javascript" src="../Javascript enhancements/js/jquery-1.9.1.min.js"></script>
        <script type="text/javascript" src="../Temples Usuario/script.js"></script>
        <link rel="stylesheet" type="text/css"  href="../Temples Usuario/styles.css">
        <link rel="stylesheet" type="text/css"  href="../Temples Usuario/styles.css">
        <link rel="stylesheet" type="text/css"  href="../Temples Usuario/responsive-css-tabs/css/noti-css.css">
        <link rel="stylesheet" type="text/css"  href="../Javascript enhancements/css/smart-forms.css">
        <script type="text/javascript" src="../Javascript enhancements/js/jquery.validate.min.js"></script>
        <script type="text/javascript" src="../Javascript enhancements/js/additional-methods.min.js"></script>
        <link href="../startbootstrap-simple-sidebar-1.0.5/css/simple-sidebar.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css"  href="../Temples Usuario/css-user/styles.css">
        <script type="text/javascript" src="http://www.parsecdn.com/js/parse-latest.js"></script>



        <script type="text/javascript">

            $(function () {

                $(".errorsContainer").hide();

                $("#contactform").validate({
                    errorClass: "state-error",
                    validClass: "state-success",
                    errorElement: "li",
                    rules: {
                        Modelo: {
                            required: true
                        },
                        ans: {
                            required: true
                        },
                        useremail: {
                            required: true,
                            email: true
                        },
                        typecar: {
                            required: true
                        },
                        type: {
                            required: true
                        },
                        details: {
                            required: true
                        }



                    },
                    messages: {
                        Modelo: {
                            required: 'Enter your Modelo'
                        },
                        ans: {
                            required: 'Enter year of the car'
                        },
                        useremail: {
                            required: 'Enter your email address',
                            email: 'Enter a VALID email address'
                        },
                        typecar: {
                            required: 'Please choose type-car'
                        },
                        type: {
                            required: 'Select type of car'
                        },
                        details: {
                            required: 'Plece you details '
                        }

                    },
                    invalidHandler: function (form, validator) {
                        $(".errorsContainer").show();
                    },
                    highlight: function (element, errorClass, validClass) {
                        $(element).closest('.field').addClass(errorClass).removeClass(validClass);
                        if (this.numberOfInvalids() > 0) {
                            $(".errorsContainer").show();
                        }
                    },
                    unhighlight: function (element, errorClass, validClass) {
                        $(element).closest('.field').removeClass(errorClass).addClass(validClass);
                        if (this.numberOfInvalids() == 0) {
                            $(".errorsContainer").hide();
                        }
                    },
                    errorPlacement: function (error, element) {
                        error.appendTo("#smartErrors");
                    }
                });

            });

        </script>



    </head>
    <body>
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="http://localhost:8383/My-take-Car/index.html">Take my car</a>
                </div>

                <div id="navbar" class="navbar-collapse collapse">
                    <form class="navbar-form navbar-left" method="GET" role="search">
                        <div class="form-group">
                            <input type="text" name="q" class="form-control" placeholder="Search">
                        </div>
                        <button type="submit" class="btn btn-default"><i class="glyphicon glyphicon-search"></i></button>
                    </form>




                    <ul class="nav navbar-nav navbar-right">
                        <li><a id="cuenta" href="#"></a></li>
                        <li class="dropdown" id="listaOption">
                            <a href="#" class="dropdown-toggle " data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">

                                <span class="fa fa-bars" id="cog"></span>
                            </a>
                            <ul class="dropdown-menu">
                                <li><a href="index-user.html">Perfil</a></li>
                                <li><a href="Notificaciones_1.html">Cuenta</a></li>
                                <li><a href="ListoFads.html">Tus anuncios</a></li>
                                <li>
                                    <a id="logout" href="#"  >Salir</a>
                                </li>

                            </ul>
                        </li>
                    </ul>
                </div><!--/.nav-collapse -->
            </div><!--/.container-fluid -->
        </nav>



        <div id="wrapper">

            <!-- Sidebar -->
            <div id="sidebar-wrapper">
                <ul class="sidebar-nav">
                    <li><a href='carEssentials.html'>Datos Básicos</a></li>
                    <li><a href='describeAdd.html'>Descripción</a></li>
                    <li><a href='customerLocation.html'>Ubicación</a></li>
                    <li><a href='carImage.html'>Fotos</a></li>
                    <li><a href='autoServices.html'>Servicios </a></li>
                    <li><a href='vehicleServices.html'>Seguridad</a></li>
                    <li><a href='insurance-policy.html'>Poliza</a></li>
                    <li><a href='pricesRent.html'>Precios</a></li>
                    <li><a href='reservasCar.html'>Reserva</a></li>
                    <li><a href='calendarReser.html'>Calendario</a></li>
                </ul>
            </div>
            <!-- /#sidebar-wrapper -->

            <!-- Page Content -->
            <div id="page-content-wrapper">
                <div class="container-fluid">
                    <a href="#menu-toggle" class="btn btn-default" id="menu-toggle"><span class=" fa fa-bars "></span></a>

                    <div class="row">
                        <div class="col-lg-12">

                            <div class="frm-row" id="paymentform">
                                <div class="smart-wrap">
                                    <div class="smart-forms smart-container wrap-0">

                                        <div class="form-header header-red">
                                            <h3>
                                                Explica a los viajeros cómo es tu Auto
                                            </h3>
                                        </div><!-- end .form-header section -->

                                        <p id="text-paymenr">
                                            Cada alojamiento de Airbnb es único. Explica cuáles son los principales atractivos de tu espacio para atraer la atención de los huéspedes que quieren alojarse en tu zona.
                                        </p>

                                        <form method="post" action="/" id="descriptionform">
                                            <div class="form-body">

                                                <div class="section" style="display: none;"  >
                                                    <label for="guestname" class="field-label">Id</label>
                                                    <label for="guestname" class="field prepend-icon">
                                                        <input type="text" name="idp" id="idp" class="gui-input" >
                                                        <span class="field-icon"><i class="fa fa-user"></i></span>  
                                                    </label>
                                                </div><!-- end section --> 


                                                <div class="frm-row">
                                                    <label class="field-label colm colm4 " style="margin-right: -79px;">Nombre de tu anuncio </label>
                                                    <div class="section colm colm8">
                                                        <label for="firstname" class="field prepend-icon">
                                                            <input type="text" name="Modelo" id="Modelo" class="gui-input" placeholder="Ofrece información clara y descriptiva">
                                                            <span class="field-icon"><i class="fa fa-sticky-note"></i></span>  
                                                        </label>
                                                    </div><!-- end section -->
                                                </div><!-- end .frm-row section -->    


                                                <div class="frm-row">
                                                    <div class="colm colm12">

                                                        <div class="section">
                                                            <label for="details" class="field-label">Resumen</label>
                                                            <label class="field">
                                                                <textarea class="gui-textarea" id="details" name="details"
                                                                          placeholder="Cuéntale a tu cliente que es lo que te gusta de tu vehiculo. Puedes contar ejemplo lo que cuenta tu auto"         ></textarea>
                                                                <span class="input-hint"> <strong>Hint:</strong> A maxmum of 3000 words.</span>   
                                                            </label>
                                                        </div><!-- end section -->                        

                                                    </div><!-- end .colm section -->

                                                </div><!-- end .frm-row section -->

                                                <div class="frm-row">
                                                    <div class="colm colm12">

                                                        <div class="section">
                                                            <label for="details" class="field-label"> Puedes añadir más información para que los viajeros conozcan mejor tu alojamiento y el tipo de anfitrión que eres. </label>

                                                        </div><!-- end section -->                        

                                                    </div><!-- end .colm section -->

                                                </div><!-- end .frm-row section -->
                                                <!-- custom errors will load here  -->
                                                <div class="notification alert-error errorsContainer">
                                                    <p>The following errors occurred:</p>
                                                    <ul id="smartErrors">

                                                    </ul>
                                                </div>                   

                                            </div><!-- end .form-body section -->
                                            <div class="form-footer">
                                                <button id="next" type="submit" class="button btn-primary"> Siguiente</button>
                                            </div><!-- end .form-footer section -->
                                        </form>



                                    </div><!-- end .smart-forms section -->
                                </div><!-- end .smart-wrap section -->              

                            </div>


                        </div>
                    </div>
                </div>
            </div>
            <!-- /#page-content-wrapper -->

        </div>

        <script>
            $("#menu-toggle").click(function (e) {
                e.preventDefault();
                $("#wrapper").toggleClass("toggled");
            });

        </script>


        <script type="text/javascript">

            Parse.initialize("AwaxZPecidC77J5pymOrQVxB3cXkhJSKdmipzt7T", "vwz5gTGne4HvdawlNUgGuhiC79FWi7kYGgyjsIPo");

            var paramstr = window.location.search.substr(1);
            var paramarr = paramstr.split("&");
            var params = {};

            var currentUser = Parse.User.current();
            var test = JSON.stringify(currentUser);
            var jsontext = test;
            var contact = JSON.parse(jsontext);

            var Username = contact.username;
            var output = "";
            output += "Bienvenido :  " + Username;
            $("#cuenta").html(output);

            $('#logout').click(function (event) {
                event.preventDefault();
                Parse.User.logOut();
                console.log("salir");
                window.location.href = "http://localhost:8383/My-take-Car/index.html";
            });


            for (var i = 0; i < paramarr.length; i++) {
                var tmparr = paramarr[i].split("=");
                params[tmparr[0]] = tmparr[1];
            }
            var Add = tmparr[1];



            $('#descriptionform').submit(function (e) {
                //on form submit
                e.preventDefault();
                var Add = tmparr[1];
                var Post = Parse.Object.extend("addUser");
                var myPost = new Post();
                var AdDescription = Parse.Object.extend("description");
                var addDescription = new AdDescription();
                var user = Parse.User.current();
                var idp = $("#idp").val();
                var modelo = $("#Modelo").val();
                var details = $("#details").val();
                var post = new Post();
                post.id = Add;
                addDescription.set("id", idp);
                addDescription.set("user", user);
                addDescription.set("descriptions", modelo);
                addDescription.set("details", details);
                addDescription.set("parent", post);
                addDescription.save(null, {
                    success: function (addDescription) {
                        window.location = "customerLocation.html?num=" + Add;
                    },
                    error: function (addDescription, error) {
                        // Execute any logic that should take place if the save fails.
                        // error is a Parse.Error with an error code and message.
                        alert('Failed to create new object, with error code: ' + error.message);
                    }
                });
            });

            function consult() {
                var Post = Parse.Object.extend("addUser");
                var Vehiculo = Parse.Object.extend("description");
                var myPost = new Post();
                var myVehiculo = new Vehiculo();
                var user = Parse.User.current();
                var query = new Parse.Query(Vehiculo);
                var post = new Post();
                post.id = Add;
                query.equalTo("parent", post);
                query.find({
                    success: function (results) {
                        if (results.length > 0) {
                            for (var i = 0; i < results.length; i++) {
                                var object = results[i];

                                //   console.log(object.id);
                                var object = results[i];
                                console.log(object.id);
                                $("#idp").val(object.id);
                                $("#Modelo").val(object.get('descriptions'));
                                $("#details").val(object.get('details'));

                            }
                        }
                    },
                    error: function (error) {
                        //  alert("Error: " + error.code + " " + error.message);
                    }
                });
            }

            consult();













        </script>
        <script src="../js/vendor/bootstrap.min.js"></script>
        <script src="../js/vendor/responces.js"></script>


    </body>
</html>
